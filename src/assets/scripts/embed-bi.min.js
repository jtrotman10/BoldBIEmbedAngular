!function(window){function BoldBIEmbed(){var rootUrl="",baseUrl="",siteIdentifier="",dashboardServerApiUrl="",designerRootUrl="",childContainer="",cdnLink="",cloudDataUrl="",onSaveFilterFn="saveFilter",onSaveAsFilterFn="saveAsFilter",onViewSavedFiltersFn="openViewSection",onBannerIconClickFn="onBannerIconClick",beforeWidgetIconRenderedFn="beforeWidgetIconRendered",onWidgetIconClickFn="onWidgetIconClick",actionBeginFn="onActionBeginOfNewDashboardViewer",actionCompleteFn="onActionCompleteOfNewDashboardViewer",beforeBannerIconRenderFn="beforeBannerIconRender",beforeOtherRenderFn="beforeOtherOptionContextMenuRender",onFavoriteChangeFn="updatefavorite",sEmbedConfig={},scriptFiles=["ej1.common.all.min.js","ej2.common.all.min.js","ej.dashboarddesigner.min.js"],scriptFilesCloud=["ej1.common.all.min.js","ej2.common.all.min.js","ej.dashboarddesigner.min.js"],cssFiles=["ej1.web.all.min.css","ej2.partone.web.all.min.css","ej2.parttwo.web.all.min.css","ej.designerwidgets.all.min.css","ej.dashboarddesigner.min.css"],cssFilesCloud=["dashboard-viewer-component.css"],embedOptions={serverUrl:"",user:"",dashboardId:"",dashboardPath:"",embedContainerId:"",embedType:"Component",environment:"OnPremise",dashboardSettings:{showHeader:!0,showExport:!0,showRefresh:!0,showInfo:!0,showFavorite:!0,showFullScreen:!0,showComments:!0,onFavoriteIconClick:"",beforeIconRender:"",onIconClick:""},widgetSettings:{showHeader:!0,showExport:!0,showFullScreen:!0,showViewData:!0,showComments:!0,beforeIconRender:"",onIconClick:""},enableFilterOverview:!0,filterParameters:"",filterSettings:{showSaveIcon:!0,showSaveAsIcon:!0,showSavedFilters:!0,onSaveFilter:"",onSaveAsFilter:"",onViewSavedFilters:""},dynamicConnection:{isEnabled:!1,keyIdentifier:""},exportSettings:{showExcel:!0,showPDF:!0,showImage:!0},height:"768px",width:"1024px",enableDarkMode:!1,authorizationServer:{url:"",headers:{}},expirationTime:0,autoRefreshSettings:{enabled:!1,hourlySchedule:{hours:0,minutes:0,seconds:0}},scalingFactor:1,localeSettings:{culture:"en-US"},actionBegin:"",actionComplete:""};this.create=function(options){if(validateOptions(options)){initializeEmbedOptions(options),embedOptions.embedType==EmbedType.Component&&((childContainer=document.createElement("div")).id=embedOptions.embedContainerId+"_embeddedbi",document.getElementById(embedOptions.embedContainerId).append(childContainer),initializeUrls(),window.BoldBI.IsDependencyLoaded||(embedOptions.environment===BoldBI.Environment.Cloud?(isEmptyOrSpaces(cdnLink)||isEmptyOrSpaces(designerRootUrl))&&getCloudLinks():loadDepedentFiles()));var ele=document.getElementById(embedOptions.embedContainerId);return instance.has(ele,"embeddedBoldBI")&&instance.remove(ele,"embeddedBoldBI"),instance.put(ele,"embeddedBoldBI",this),this}},this.destroy=function(){instance.remove(document.getElementById(embedOptions.embedContainerId),"embeddedBoldBI")},this.getInstance=function(eleID){return instance.get(document.getElementById(eleID),"embeddedBoldBI")},this.loadDashboard=function(){if(embedOptions.embedType==EmbedType.Component)showLoader(),isDependencyLoaded();else if(this.embedOptions.embedType==EmbedType.IFrame){var iframe=document.createElement("iframe");iframe.frameBorder=0,iframe.width=embedOptions.width,iframe.height=embedOptions.height,iframe.id=embedOptions.embedContainerId+"_"+embedOptions.dashboardId,iframe.allowfullscreen=embedOptions.dashboardSettings.showFullScreen,iframe.setAttribute("src",embedOptions.serverUrl+"/dashboards/"+embedOptions.dashboardId+"?isembed=true"),document.getElementById(embedOptions.embedContainerId).appendChild(iframe)}},this.loadDashboardView=function(viewName){throwError("loadDashboardView not implemented")},this.loadDashboardWidget=function(widgetName){throwError("loadDashboardView not implemented")},this.refreshDashboard=function(){var existingDashboardInstance=getDashboardInstance();null!=existingDashboardInstance&&existingDashboardInstance.refresh()};var initializeEmbedOptions=function(options){embedOptions=Object.assign(embedOptions,options)},initializeUrls=function(){embedOptions.environment==BoldBI.Environment.OnPremise?(rootUrl=embedOptions.serverUrl.substr(0,embedOptions.serverUrl.indexOf("/bi/")+3),baseUrl=embedOptions.serverUrl,siteIdentifier=embedOptions.serverUrl.substr(embedOptions.serverUrl.indexOf("/site/")+1),dashboardServerApiUrl=rootUrl+"/api/"+siteIdentifier,designerRootUrl=rootUrl+"/designer"):(rootUrl=embedOptions.serverUrl,baseUrl=embedOptions.serverUrl,siteIdentifier="",dashboardServerApiUrl=rootUrl+"/api/")},loadCloudDepedentFiles=function(responseInfo){var responseData=responseInfo.Data;cdnLink=responseData.CdnUrl,designerRootUrl=responseData.DesignerServerUrl,loadDepedentFiles()},getCloudLinks=function(){xhrRequestHelper("Get",dashboardServerApiUrl+"/system-settings/get-url",{},{},loadCloudDepedentFiles)},loadDepedentFiles=function(){scriptFiles.forEach((function(script){var scriptTag=document.createElement("script");scriptTag.type="text/javascript",embedOptions.environment===BoldBI.Environment.OnPremise?scriptTag.src=rootUrl+"/webdesignerservice/scripts/"+script:scriptTag.src=cdnLink+"/scripts/designer/"+script,document.head.appendChild(scriptTag)})),cssFiles.forEach((function(css){var cssTag=document.createElement("link");cssTag.rel="stylesheet",embedOptions.environment===BoldBI.Environment.OnPremise?cssTag.href=rootUrl+"/webdesignerservice/themes/"+css:cssTag.href=cdnLink+"/css/designer/"+css,document.head.appendChild(cssTag)}))},renderDashboard=function(responseInfo){embedResponse=responseInfo.Data,embedResponse.ItemDetail=JSON.parse(responseInfo.Data.ItemDetail),embedResponse.UserDetail=JSON.parse(responseInfo.Data.UserDetail);var version=0;document.getElementById(embedOptions.embedContainerId).style.height=embedOptions.height,document.getElementById(embedOptions.embedContainerId).style.width=embedOptions.width;var dashboardOptions={siteUrl:baseUrl,serviceUrl:designerRootUrl,dataServiceUrl:designerRootUrl,serverUrl:dashboardServerApiUrl,viewerSettings:{serviceUrl:designerRootUrl+"/v1.0/design"},mode:ej.dashboardDesigner.mode.view,IsEmbed:!0,_isPublic:!0,itemId:embedOptions.dashboardId,dashboardPath:embedOptions.dashboardId+"/0",serviceAuthorizationToken:embedResponse.access_token,dashboardName:embedResponse.ItemDetail.Name,dashboardDescription:embedResponse.ItemDetail.Description,theme:embedOptions.enableDarkMode?"dark":"light",actionBegin:function(arg){onBoldBIDashboardInstaceActionBegin(arg)},actionComplete:function(arg){onBoldBIDashboardInstaceActionComplete(arg)},beforeBannerIconRender:function(arg){onBoldBIDashboardBeforeBannerIconRender(arg)},beforeOtherOptionContextMenuRender:function(arg){onBoldBIDashboardBeforeOtherOptionContextMenuRender(arg)},_onSaveFilter:function(arg){onBoldBIDashboardSaveFilter(arg)},_onSaveAsFilter:function(arg){onBoldBIDashboardSaveAsFilter(arg)},_onViewSavedFilters:function(arg){onBoldBIDashboardOpenViewSection(arg)},onBannerIconClick:function(arg){onBoldBIDashboardBannerIconClick(arg)},beforeWidgetIconRendered:function(arg){onBoldBIDashboardBeforeWidgetIconRendered(arg)},onWidgetIconClick:function(arg){onBoldBIDashboardWidgetIconClick(arg)},_onFavoriteStateChange:function(arg){onBoldBIDashboardUpdatefavorite(arg)}};if(embedOptions.environment==BoldBI.Environment.OnPremise?dashboardOptions.cdnPath=rootUrl+"/webdesignerservice/scripts/":dashboardOptions.cdnPath=cdnLink+"/scripts/designer/",embedOptions.autoRefreshSettings.enabled&&(dashboardOptions.autoRefreshSettings={mode:"Hourly",hourlySchedule:{hours:embedOptions.autoRefreshSettings.hourlySchedule.hours,minutes:embedOptions.autoRefreshSettings.hourlySchedule.minutes,seconds:embedOptions.autoRefreshSettings.hourlySchedule.seconds}}),window.jQuery instanceof Function){var embedContainer=window.jQuery.call(this,"#"+childContainer.id);if(window.ejDashboardDesigner instanceof Function){var existingDashboardInstance=getDashboardInstance();null!=existingDashboardInstance?(existingDashboardInstance.model=Object.assign(existingDashboardInstance.model,dashboardOptions),existingDashboardInstance.redrawDashboard()):window.ejDashboardDesigner.call(this,embedContainer,dashboardOptions)}else throwError("ejDashboardDesigner is not defined")}else throwError("jQuery is not defined")},isDependencyLoaded=function(){window.jQuery instanceof Function&&window.ej instanceof Object&&window.ej.dashboardDesigner instanceof Object&&window.ejDashboardDesigner instanceof Function?(window.BoldBI.IsDependencyLoaded||(window.BoldBI.IsDependencyLoaded=!0),getAuthorizationToken()):setTimeout(isDependencyLoaded,500)},getDashboardInstance=function(){var ele=window.jQuery.call(this,"#"+childContainer.id)[0];return window.jQuery.data.call(this,ele,"ejDashboardDesigner")},onBoldBIDashboardInstaceActionBegin=function(arg){if(void 0!==arg)switch(arg.eventType){case"renderLayout":removeElementsClass(embedOptions.embedContainerId,".preloader-wrap","viewer-blue-loader")}var serverFnc=window[actionBeginFn];serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.actionBegin];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardInstaceActionComplete=function(arg){var serverFnc=window[actionCompleteFn];serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.actionCompleteFn];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardBeforeBannerIconRender=function(arg){var serverFnc=window.beforeBannerIconRender;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.dashboardSettings.beforeIconRender];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardBeforeOtherOptionContextMenuRender=function(arg){var serverFnc=window[beforeOtherOptionContextMenuRenderFn];serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig)},onBoldBIDashboardSaveFilter=function(arg){var serverFnc=window.saveFilter;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.filterSettings.onSaveFilter];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardSaveAsFilter=function(arg){var serverFnc=window.saveAsFilter;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.filterSettings.onSaveAsFilter];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardOpenViewSection=function(arg){var serverFnc=window.openViewSection;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.filterSettings.onViewSavedFilters];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardBannerIconClick=function(arg){var serverFnc=window.onBannerIconClick;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.dashboardSettings.onIconClick],dashboardViewerInstance;(clientFnc instanceof Function&&clientFnc.call(this,arg),void 0!==arg.name&&"theming"==arg.name.toLowerCase())&&getDashboardInstance().applyDashboardTheme(arg.themeValue)},onBoldBIDashboardBeforeWidgetIconRendered=function(arg){var serverFnc=window.beforeWidgetIconRendered;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.widgetSettings.beforeIconRender];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardWidgetIconClick=function(arg){var serverFnc=window.onWidgetIconClick;serverFnc instanceof Function&&serverFnc.call(this,arg,sEmbedConfig);var clientFnc=window[embedOptions.widgetSettings.onIconClick];clientFnc instanceof Function&&clientFnc.call(this,arg)},onBoldBIDashboardUpdatefavorite=function(arg){var serverFnc=window[onFavoriteStateChangeFn];serverFnc instanceof Function&&serverFnc.call(this,arg);var clientFnc=window[embedOptions.dashboardSettings.onFavoriteIconClick];clientFnc instanceof Function&&clientFnc.call(this,arg)},showLoader=function(){var loaderStyle=document.createElement("style");loaderStyle.innerHTML="#"+embedOptions.embedContainerId+" .viewer-blue-loader { display: block !important; }\t\t\n\t\t  #"+embedOptions.embedContainerId+" .loader-icon { display: block; }\n\t\t  #"+embedOptions.embedContainerId+" .loader-icon { left: 0px !important; position: relative; margin: 0px auto; width: 54px; height: 54px; }\n\t\t  #"+embedOptions.embedContainerId+" .loader-icon .circular { -webkit-animation: rotate 2s linear infinite; animation: rotate 2s linear infinite; height: 54px; width: 54px; position: relative; }\n\t\t  #"+embedOptions.embedContainerId+" .loader-icon .path { stroke-dasharray: 1,200; stroke-dashoffset: 0; -webkit-animation: dash 1.5s ease-in-out infinite; animation: dash 1.5s ease-in-out infinite; stroke: #5592FB; stroke-linecap: square; }\n\t\t  @keyframes rotate { 100% { transform: rotate(360deg); } }\n\t\t  @-webkit-keyframes rotate { 100% { transform: rotate(360deg); } }\n\t\t  @keyframes dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35; } 100% { stroke-dasharray: 89,200; stroke-dashoffset: -124; } }\n\t\t  @-webkit-keyframes dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35; } 100% { stroke-dasharray: 89,200; stroke-dashoffset: -124; } }",document.head.appendChild(loaderStyle);var loader="<div class='preloader-wrap viewer-blue-loader' style='display: none; width: "+embedOptions.width+";height: "+embedOptions.height+"; position: fixed; top: 0; bottom: 0; z-index : 2;'> <div id='loader_image' align='center' style='position:relative;top:45%;'> <div class='loader-blue loader-icon' id='loader-icon'> <svg class='circular'> <circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle> </svg> </div> </div> </div>";document.getElementById(embedOptions.embedContainerId).insertAdjacentHTML("afterbegin",loader)},getAuthorizationToken=function(){var embedConfig_embed_nonce=uuidv4Generartor(),embedConfig_embed_user_email=embedOptions.user.email,embedConfig_embed_dashboard_id,embedConfig_embed_timestamp,embedConfig_embed_expirationtime,embedQuerString,data={embedQuerString:"embed_nonce="+embedConfig_embed_nonce+"&embed_dashboard_id="+embedOptions.dashboardId+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+embedOptions.expirationTime,dashboardServerApiUrl:dashboardServerApiUrl};xhrRequestHelper("POST",embedOptions.authorizationServer.url,data,embedOptions.authorizationServer.headers,renderDashboard)},xhrRequestHelper=function(type,url,data,headers,callBackFn){var http=new XMLHttpRequest;for(var key in http.open(type,url,!0),http.responseType="json",http.setRequestHeader("Content-type","application/json"),headers)http.setRequestHeader(key,headers[key]);http.onreadystatechange=function(){4==http.readyState&&200==http.status&&callBackFn.call(this,"object"==typeof http.response?http.response:JSON.parse(http.response))},http.send(JSON.stringify(data))},uuidv4Generartor=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0,v;return("x"==c?r:3&r|8).toString(16)}))},isEmptyOrSpaces=function(str){return null===str||null!==str.match(/^ *$/)},validateOptions=function(options){return isEmptyOrSpaces(options.serverUrl)&&throwError("Server URL cannot be empty"),isEmptyOrSpaces(options.dashboardId)&&isEmptyOrSpaces(options.dashboardPath)&&throwError("Dashboard id or path cannot be empty"),isEmptyOrSpaces(options.embedContainerId)&&throwError("Embedded DOM id cannot be empty"),!0},throwError=function(errorMsg){throw"BoldBI Embedded: "+errorMsg},removeElementsClass=function(id,childElement,targeClass){var nodeList=[];isEmptyOrSpaces(id)?nodeList=document.querySelector(childElement):isEmptyOrSpaces(childElement)?nodeList.push(document.getElementById(id)):nodeList=document.getElementById(id).querySelectorAll(childElement),nodeList.forEach((function(element){removeClass(element,targeClass)}))},hasClass=function(el,className){return el.classList?el.classList.contains(className):!!el.className.match(new RegExp("(\\s|^)"+className+"(\\s|$)"))},addClass=function(el,className){el.classList?el.classList.add(className):hasClass(el,className)||(el.className+=" "+className)},removeClass=function(el,className){if(el.classList)el.classList.remove(className);else if(hasClass(el,className)){var reg=new RegExp("(\\s|^)"+className+"(\\s|$)");el.className=el.className.replace(reg," ")}},instance={_storage:new WeakMap,put:function(element,key,obj){this._storage.has(element)||this._storage.set(element,new Map),this._storage.get(element).set(key,obj)},get:function(element,key){return this._storage.get(element).get(key)},has:function(element,key){return this._storage.has(element)&&this._storage.get(element).has(key)},remove:function(element,key){var ret=this._storage.get(element).delete(key);return 0!==this._storage.get(element).size&&this._storage.delete(element),ret}};return this}void 0===window.BoldBI&&(window.BoldBI=BoldBIEmbed(),window.BoldBI.EmbedType={Component:"Component",IFrame:"IFrame"},window.BoldBI.Environment={Cloud:"Cloud",OnPremise:"OnPremise"},window.BoldBI.AuthorizationProvider={None:0,GlobalOAuth:1,GlobalOpenID:2,TenantOAuth:3,TenantOpenID:4},window.BoldBI.IsDependencyLoaded=!1)}(window);